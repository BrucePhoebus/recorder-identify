!function o(a,c,d){function f(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=c[t]={exports:{}};a[t][0].call(i.exports,function(e){return f(a[t][1][e]||e)},i,i.exports,o,a,c,d)}return c[t].exports}for(var s="function"==typeof require&&require,e=0;e<d.length;e++)f(d[e]);return f}({1:[function(e,t,n){"use strict";t.exports=e("./recorder-identify").RIdentify},{"./recorder-identify":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.RIdentify=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.recorderConfig={numChannels:1,mimeType:"audio/wav",bitRate:16,sampleRate:16e3};var i=this;Object.assign(this.recorderConfig,t.config);var n,r,o=t.url||"/robot/rs/qa/asr",a=1e3*(t.time||21),c=0,d=null,f=null,s=!1;function u(){f&&f.stop(function(e,t){var n,r;(s=!s,clearInterval(d),c&&(new Date).getTime()-c.getTime()<1e3)?c=0:(c=0,e.size<2e4?l("录音太短不可用！"):(l("录音结束..."),n=e,(r=new FormData).append("file",n,(new Date).getTime()+"."+i.recorderConfig.mimeType.split("/")[1]),$.ajax({url:o,type:"post",data:r,processData:!1,contentType:!1,success:function(e){e.data&&$("#rIdentify").data("search-id")&&$("#"+$("#rIdentify").data("search-id")).val(e.data)},error:function(){}})))},function(e){l("录音失败:"+e)})}n=document.getElementsByTagName("head")[0],(r=document.createElement("script")).type="text/javascript",r.onload=r.onreadystatechange=function(){var e;this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||((e=Recorder({type:i.recorderConfig.mimeType.split("/")[1],bitRate:i.recorderConfig.bitRate,sampleRate:i.recorderConfig.sampleRate,disableEnvInFix:!0,onProcess:function(){}})).open(function(){f=e},function(e,t){l((t?"UserNotAllow，":"")+"打开录音失败："+e)}),$("#rIdentify").click(function(){void 0!==s?s?u():f&&Recorder.IsOpen()?(f.start(),l("开始录音...再次点击录音终止！"),s=!s,c=new Date,d=setInterval(function(){c&&(new Date).getTime()-c.getTime()>=a&&u()},a)):l("未打开录音"):l("请确认麦克风未被禁用！")}))},r.src="dist/recorder.wav.min.js",n.appendChild(r);var p=null;function l(e){p&&$("#rIdentifyTip")&&(clearTimeout(p),$("#rIdentifyTip").remove());var t=document.createElement("div");t.id="rIdentifyTip",t.style.cssText="position: absolute; top: "+($("#rIdentify")[0].offsetTop-20)+"px;left: "+$("#rIdentify")[0].offsetLeft+"px;border-radius: 8px;margin-top: -15px;color: #fff;background-color: #409eff;padding: 5px 0;z-index: 2147483647;";var n=document.createElement("span");n.innerText=e,n.style.cssText="margin: 0 10px;",t.appendChild(n),document.getElementById("rIdentify").appendChild(t),p=setTimeout(function(){$("#rIdentifyTip").remove()},2e3)}};new(n.default=r)},{}]},{},[1]);