!function i(a,f,c){function d(t,e){if(!f[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=f[t]={exports:{}};a[t][0].call(o.exports,function(e){return d(a[t][1][e]||e)},o,o.exports,i,a,f,c)}return f[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(e,t,n){"use strict";t.exports=e("./recorder-identify").RIdentify},{"./recorder-identify":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=n.RIdentify=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.recorderConfig={numChannels:1,mimeType:"audio/wav",bitRate:16,sampleRate:16e3};var o=this;Object.assign(this.recorderConfig,t.config);var i=t.url||"/robot/rs/qa/asr",n=1e3*(t.time||21),a=0,f=null,r=null,c=!1;(function(){var e=Recorder({type:o.recorderConfig.mimeType.split("/")[1],bitRate:o.recorderConfig.bitRate,sampleRate:o.recorderConfig.sampleRate,disableEnvInFix:!0,onProcess:function(){}});e.open(function(){r=e},function(e,t){p((t?"UserNotAllow，":"")+"打开录音失败："+e)})})(),document.getElementById("rIdentify").addEventListener("mousedown",function(){void 0!==c?r&&Recorder.IsOpen()?(r.start(),p(u),d=setInterval(function(){p(u+=".")},1e3),c=!c,a=new Date,f=setInterval(function(){a&&(new Date).getTime()-a.getTime()>=n&&s()},n)):p("未打开录音"):p("请确认麦克风未被禁用！")}),document.getElementById("rIdentify").addEventListener("mouseup",function(){void 0!==c?s():p("请确认麦克风未被禁用！")});var d=null,u="开始录音";function s(){clearInterval(d),u="开始录音",r&&r.stop(function(e,t){var n,r;(c=!c,clearInterval(f),a&&(new Date).getTime()-a.getTime()<1e3)?a=0:(a=0,e.size<2e4?p("录音太短不可用！"):(p("录音结束"),n=e,(r=new FormData).append("file",n,(new Date).getTime()+"."+o.recorderConfig.mimeType.split("/")[1]),$.ajax({url:i,type:"post",data:r,processData:!1,contentType:!1,success:function(e){e.data&&$("#rIdentify").data("search-id")&&($("#"+$("#rIdentify").data("search-id")).val(e.data),function(e,t){if("object"==(void 0===e?"undefined":m(e)))if(t=t.replace(/^on/i,""),document.all)t="on"+t,e.triggerEvent(t);else{var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}}(document.getElementById($("#rIdentify").data("search-id")),"change"))},error:function(e){console.log(e)}})))},function(e){p("录音失败:"+e)})}var l=null;function p(e){$("#rIdentifyTip")&&($("#rIdentifyTip").remove(),l&&clearTimeout(l));var t=document.createElement("div");t.id="rIdentifyTip",t.style.cssText="position: absolute; top: "+($("#rIdentify")[0].offsetTop-20)+"px;left: "+$("#rIdentify")[0].offsetLeft+"px;border-radius: 8px;margin-top: -15px;color: #fff;background-color: #409eff;padding: 5px 0;z-index: 2147483647;";var n=document.createElement("span");n.innerText=e,n.style.cssText="margin: 0 10px;white-space: nowrap;",t.appendChild(n),$("#rIdentify").after(t),l=setTimeout(function(){$("#rIdentifyTip").remove()},6e3)}};new(n.default=r)},{}]},{},[1]);